NOTES on use of DARWIN 1.3 (April 12, 2006) -- J H Stewman

This revision of the original DARWIN 1.0 Beta release contains all modifications
made and features added during the January 2006 Winter Term and subsequent
modifications during February, March and April of the same year.

Software Changes
================
(1) Enhanced "Optimal" matching using Tip position shifting as well as selective
shortening of the leading and trailing edges of both fins.

(2) Support for Match Queues, including
	(a) new file folders 
		tracedFins -- all individual fin traces and image copies go here
		matchQueues -- all matchQueue files (lists of individual fins) go here
		matchQResults -- all results files and matchQueue summaries go here
		
	(b) revisions to file selectors so individual fin tracings, matchQueue files and
	results always go in correct locations in file hierarchy

	(c) revised results file structure so results can be loaded for viewing at a
	later time

	(d) revised match results summary reporting on console and in a summary file

	(e) modified database file structure to include new "absolute offset" list at end
	of file.  These offsets indicate the actual location of each fin in the database
	(in the order of its original addition to the database - regardless of any current
	sorting) OR the deletion of a fin that previously was part of the database (offset
	value of -1).  A new access function DatabaseFin::getItemAbsolute(unsigned pos) is
	used to retrieve the fin from the absolute (unsorted) position specified.  All 
	save and delete operations have been modified to maintain the absolute offset list.
	NOTE: these modifications allow the user to run a matchQueue, creating numerous
	match results files, and still be able to view the results following subsequent
	changes to the database.  Previously, any addition or deletion or sort of the database
	would cause the match results files to loose synch with the database or even crash
	the program.

	(f) revised file management for match results files.  Now old results are copied 
	into the "matchQResults/old" folder BEFORE a match queue is run.  This way the
	results-unknown-* files in matchQResults pertain to the last queue run, and
	those in the matchQResults/old folder pertain to the queue run before that.  Both
	sets are accessible through the MatchQueueDialog.  No provision is made for saving 
	more than one backup.  Files can be moved manually.

(3) A database conversion program "addAbsolute.exe" allows the user to convert a type 3
database (one supporting catalog category names) to a type 3+ using the absolute offset
lists.  Usage is "addAbsolute darwin.db"

Usage Scenarios
===============
(1) Building a new database WITHOUT running matches
	(This is probably the case if an existing database is being converted to DARWIN format.)

REPEAT the following sequence for ALL fin images to be included in the database
Open an image file
Clip and otherwise appropriately modify the fin image
Trace the fin outline (manually adjust as needed)
Find the fin features (manually adjust as needed)
SAVE the fin trace if you desire access to the trace later for purposes of matching
ADD FIN TO DATABASE
Close Trace Window

(2) Building a database INCREMENTALLY
	(This is probably the case when a new study is being initiated and no catalog exists)

(NOTE: there are two approaches depending on your methodology)

REPEAT the following sequence for ALL fin images to be considered for inclusion in the database
Open an image file
Clip and otherwise appropriately modify the fin image
Trace the fin outline (manually adjust as needed)
Find the fin features (manually adjust as needed)
EITHER (batch/queued approach)
	SAVE the fin trace if you desire access to the trace later for purposes of QUEUED matching
	Close the Trace Window
OR (interactive approach)
	Optionally, SAVE the fin trace if you desire access to the trace later for purposes of matching
	Match the fin against the existing database.
	Review the results of the match
	If the unknown fin matches a database fin, 
		NO ACTION is required or supported at this time.
	If the unknown fin does not match any database fins, 
		select "NO FINS MATCH" to add this fin to the database

NOTE: If fins were saved for QUEUED (or BATCH) matching, then process as follows

Select Queue from the Main Window
ADD a sequence of saved fin files (*.fin) to the displayed list
SAVE the queue (list of fin file names), if desired
RUN the Match (the process may be allowed to run overnight)
	Any previously saved queue may be reloaded and rerun at a later date/time
	The matching creates a "results-summary" file and a sequence of match results
	files "results-unknown-0", "results-unknown-1", ...
	WARNING: These files overwrite any existing ones, so review all results BEFORE
	running another match queue.  SEE NOTE ABOVE ABOUT NEW BACKUP FEATURE.
Each match results file may be VIEWED at any time after the match queue is RUN
	If the unknown fin matches a database fin, 
		NO ACTION is required or supported at this time.
	If the unknown fin does not match any database fins, 
		select "NO FINS MATCH" to add this fin to the database

NOTE: The interactive approach does NOT save the match results in a file.  If your 
protocol requires a second person to agree to a "NO FINS MATCH" prior to adding
a fin to the database, we recommend using the batch/queued approach so that 
retracing and rematching of the fin are not required.  The interactive approach
does not currently save the match results for subsequent review.
